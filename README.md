Задание:

Условный интернет-магазин работает в 20 регионах России.
В интернет-магазине продается 200 000 наименований товаров.
Для каждого товара в каждом регионе определен набор из трех цен (цена закупки, цена продажи, цена со скидкой).
Цены в интернет-магазине обновляются при помощи API.
В течение суток могут быть пересчитаны все цены всех товаров во всех регионах.
 
В магазине могут добавляться новые товары и новые регионы.
К этим этим новым товарам в новых регионах по API также будут передаваться цены.
 
Необходимо реализовать единственный метод API для создания новых и обновления существующих цен товаров в интернет-магазине:
1) данные в API передаются методом POST;
2) для авторизации используется поле key (текстовая строка);
3) для передачи данных используется поле data (данные в формате JSON);
4) в одном запросе к API может быть передана информация об одном или нескольких товарах (до 1000 товаров);
5) данные об 1 товаре содержат в себе все цены во всех регионах;
6) данные сохраняются в таблицах реляционной БД (например, MySQL), схему данных необходимо придумать самостоятельно;
7) необходимо предусмотреть обработку ошибок;
8) результат выполнения необходимо вернуть в виде объекта формата JSON.

Комментарии:

Созданы 3 таблицы БД Product, Region, Price.
Таблица Product содердит в себе id и наименование товара. 
Таблица Region содержит в себе id и наименование региона. 
Таблица Price содердит в себе id, id_region, id_product и три цены на товар.
Так же все таблицы содержат стандартные поля created_at и updated_at.
Таблицы Product - Price и Region - Price имеют связь один ко многим.
Разработанный метод API предназначен для работы с таблицей Price.
Для заполнения/обновления таблицы необходимо иметь заполненнные таблицы Product и Region имеющие соответствующие id.

Для хранения ключей и валидации запроса создана услованя таблица key в которой хранится hash_key.

Ответ выведен в формате JSON формате и говорит в случае успеха количество добавленных и обновленных строк.
В случае неудачи отдает сообщение об ошибке.

В качестве возможной доработки можно реализовать:
- запись в логи информации о неудачно сохренненой строке без вывода Exception с продолжением работы цикла.
